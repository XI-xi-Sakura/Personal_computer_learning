## Redis特性
### 1. 速度快
正常情况下，Redis执行命令的速度非常快，官方给出的数字是读写性能可以达到10万/秒，当然这也取决于机器的性能，但这里先不讨论机器性能上的差异，只分析一下是什么造就了Redis如此之快，可以大概归纳为以下四点：
- **Redis的所有数据都是存放在内存中的**，表1-1是谷歌公司2009年给出的各层级硬件执行速度，所以把数据放在内存中是Redis速度快的最主要原因。
- Redis是用C语言实现的，一般来说C语言实现的程序“距离”操作系统更近，执行速度相对会更快。
- Redis**使用了单线程**，预防了多线程可能产生的竞争问题。
Redis在6.0版本引入了多线程机制，但主要也是在处理网络和IO，不涉及到数据命令，即命令的执行仍然采用了单线程模式。
- 作者对于Redis源代码可以说是精打细磨，曾经有人评价Redis是少有的集性能和优雅于一身的开源代码。

**表1-1谷歌公司给出的各层级硬件执行速度**
|层级|速度|
| ---- | ---- |
|L1 cache reference|0.5 ns|
|Branch mispredict|5 ns|
|L2 cache reference|7 ns|
|Mutex lock/unlock|25 ns|
|Main memory reference|100 ns|
|Compress 1 K bytes with Zippy|3000 ns|
|Send 2 K bytes over 1 Gbps network|20000 ns|
|Read 1 MB sequentially from Memory|250000 ns|
|Round trip within same datacenter|500000 ns|
|Disk seek|10000000 ns|
|Read 1 MB sequentially from disk|20000000 ns|
|Send packet CA -> Netherlands -> CA|150000000 ns|

### 2. 基于键值对的数据结构服务器
几乎所有的编程语言都提供了类似字典的功能，例如C++里的map、Java里的map、Python里的dict等，类似于这种组织数据的方式叫做基于键值对的方式，
与很多键值对数据库不同的是，Redis中的值不仅可以是字符串，而且还可以是具体的数据结构，这样不仅能便于在许多应用场景的开发，同时也能提高开发效率。
Redis的全程是REmote Dictionary Server，它主要提供了5种数据结构：字符串（string）、哈希（hash）、列表（list）、集合（set）、有序集合（ordered set / zset），同时在字符串的基础之上演变出了位图（Bitmaps）和HyperLogLog两种神奇的数据结构“，
### 3. 丰富的功能
除了5种数据结构，Redis还提供了许多额外的功能：
- 提供了键过期功能，可以用来实现缓存。
- 提供了发布订阅功能，可以用来实现消息系统。
- 支持Lua脚本功能，可以利用Lua创造出新的Redis命令。
- 提供了简单的事务功能，能在一定程度上保证事务特性。
- 提供了流水线（Pipeline）功能，这样客户端能将一批命令一次性传到Redis，减少了网络的开销。

### 4. 简单稳定
Redis的简单主要表现在三个方面。
- 首先，Redis的源码很少，早期版本的代码只有2万行左右，3.0版本以后由于添加了集群特性，代码增至5万行左右，相对于很多NoSQL数据库来说代码量相对要少很多，也就意味着普通的开发和运维人员完全可以“吃透”它。
- 其次，Redis使用单线程模型，这样不仅使得Redis服务端处理模型变得简单，而且也使得客户端开发变得简单。
- 最后，Redis不需要依赖于操作系统中的类库（例如Memcache需要依赖libevent这样的系统类库），Redis自己实现了事件处理的相关功能。

但与简单相对的是Redis具备相当的稳定性，在大量使用过程中，很少出现因为Redis自身BUG而导致宕掉的情况。

### 5. 客户端语言多
Redis提供了简单的TCP通信协议，很多编程语言可以很方便地接入到Redis，并且由于Redis受到社区和各大公司的广泛认可，所以支持Redis的客户端语言也非常多，几乎涵盖了主流的编程语言，例如C、C++、Java、PHP、Python、NodeJS等，后续我们会对Redis的客户端使用做详细说明。

### 6. 持久化（Persistence）
通常看，将数据放在内存中是不安全的，一旦发生断电或者机器故障，重要的数据可能就会丢失，因此Redis提供了两种持久化方式：RDB和AOF，即可以用两种策略**将内存的数据保存到硬盘中**，这样就保证了数据的可持久性，后续我们将对Redis的持久化进行详细说明。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/616ba025b79441ecadfdf266417ac5c8.png)

### 7. 主从复制（Replication）
Redis提供了复制功能，实现了多个相同数据的Redis副本（Replica）（如图1-2所示），复制功能是分布式Redis的基础。后续我们会对Redis的复制功能进行详细演示。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8536b1a59be342bbb1d4f0be8bc9758e.png)


### 8. 高可用（High Availability）和分布式（Distributed）
Redis提供了高可用实现的Redis哨兵（Redis Sentinel），能够保证Redis结点的故障发现和故障自动转移。也提供了Redis集群（Redis Cluster），是真正的分布式实现，提供了高可用、读写和容量的扩展性。

## Redis使用场景

### 1. 缓存（Cache）
缓存机制几乎在所有大型网站都有使用，合理地使用缓存不仅可以加速数据的访问速度，而且能够有效地降低后端数据源的压力。Redis提供了键值过期时间设置，并且也提供了灵活控制最大内存和内存溢出后的淘汰策略。可以这么说，一个合理的缓存设计能够为一个网站的稳定保驾护航。

### 2. 排行榜系统
排行榜系统几乎存在于所有的网站，例如按照热度排名的排行榜，按照发布时间的排行榜，按照各种复杂维度计算出的排行榜，Redis提供了列表和有序集合的结构，合理地使用这些数据结构可以很方便地构建各种排行榜系统。

### 3. 计数器应用
计数器在网站中的作用至关重要，例如视频网站有播放数、电商网站有浏览数，为了保证数据的实时性，每一次播放和浏览都要做加1的操作，如果并发量很大对于传统关系型数据的性能是一种挑战。Redis天然支持计数功能而且计数的性能也非常好，可以说是计数器系统的重要选择。

### 4. 社交网络
赞/踩、粉丝、共同好友/喜好、推送、下拉刷新等是社交网站的必备功能，由于社交网站访问量通常比较大，而且传统的关系型数据不太合适保存这种类型的数据，Redis提供的数据结构可以相对比较容易地实现这些功能。

### 5. 消息队列系统
消息队列系统可以说是一个大型网站的必备基础组件，因为其具有业务解耦、非实时业务削峰等特性。Redis提供了发布订阅功能和阻塞队列的功能，虽然和专业的消息队列比还不够足够强大，但是对于一般的消息队列功能基本可以满足。


